<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sweet Bakers - Food Ordering</title>
    <link rel="stylesheet" href="../style.css">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        /* Keep your existing styles */
    </style>
</head>
<body>

<header>
    <h1>Welcome to Sweet Bakers</h1>
    <p>Your delicious treats are just a click away!</p>
</header>

<div class="menu">
    <h2>Menu</h2>
    <div class="menu-item">
        <span>Vanilla Cake</span><span>Ksh 1000 per kg</span>
        <button class="add-to-cart" data-name="Vanilla Cake" data-price="1000">Add to Cart</button>
    </div>
    <div class="menu-item">
        <span>Marble Cake</span><span>Ksh 1500 per kg</span>
        <button class="add-to-cart" data-name="Marble Cake" data-price="1500">Add to Cart</button>
    </div>
    <div class="menu-item">
        <span>Lemon Cake</span><span>Ksh 500 per kg</span>
        <button class="add-to-cart" data-name="Lemon Cake" data-price="500">Add to Cart</button>
    </div>
    <div class="menu-item">
        <span>Fruit Cake</span><span>Ksh 2000 per kg</span>
        <button class="add-to-cart" data-name="Fruit Cake" data-price="2000">Add to Cart</button>
    </div>
    <div class="menu-item">
        <span>Chocolate Cake</span><span>Ksh 1500 per kg</span>
        <button class="add-to-cart" data-name="Chocolate Cake" data-price="1500">Add to Cart</button>
    </div>
    <div class="menu-item">
        <span>Muffins</span><span>Ksh 15 per piece</span>
        <button class="add-to-cart" data-name="Muffins" data-price="15">Add to Cart</button>
    </div>
    <div class="menu-item">
        <span>Swiss Rolls</span><span>Ksh 100 per piece</span>
        <button class="add-to-cart" data-name="Swiss Rolls" data-price="100">Add to Cart</button>
    </div>
    <div class="menu-item">
        <span>Cookies</span><span>Ksh 10 per piece</span>
        <button class="add-to-cart" data-name="Cookies" data-price="10">Add to Cart</button>
    </div>
    <div class="menu-item">
        <span>Buns</span><span>Ksh 20 per piece</span>
        <button class="add-to-cart" data-name="Buns" data-price="20">Add to Cart</button>
    </div>
    <div class="menu-item">
        <span>Scones</span><span>Ksh 20 per piece</span>
        <button class="add-to-cart" data-name="Scones" data-price="20">Add to Cart</button>
    </div>
</div>

<div class="cart">
    <h2>Your Cart</h2>
    <table id="cart-items">
        <thead>
            <tr>
                <th>Item</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Subtotal</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <!-- Cart items will be dynamically added here -->
        </tbody>
    </table>
    <div class="cart-summary">
        <h3>Total: Ksh <span id="cart-total">0.00</span></h3>
        <button id="checkout-button">Checkout</button>
    </div>
</div>

<form id="orderForm">
    <h2>Place Your Order</h2>
    
    <label for="name">Your Name</label>
    <input type="text" id="name" name="name" placeholder="Enter your name" required>

    <label for="email">Your Email</label>
    <input type="email" id="email" name="email" placeholder="Enter your email" required>

    <label for="order">Your Order</label>
    <textarea id="order" name="order" rows="5" placeholder="List the items you want to order" required></textarea>

    <label for="deliveryDate">Delivery Date</label>
    <input type="date" id="deliveryDate" name="deliveryDate" required>

    <button type="submit">Place Order</button>
</form>

<script>
    // JavaScript to handle cart functionality
    let cart = [];

    document.querySelectorAll(".add-to-cart").forEach((button) => {
        button.addEventListener("click", function () {
            const name = this.dataset.name;
            const price = parseInt(this.dataset.price);
            addToCart(name, price);
            updateCartUI();
        });
    });

    function addToCart(name, price) {
        const existingItem = cart.find((item) => item.name === name);
        if (existingItem) {
            existingItem.quantity++;
            existingItem.subtotal = existingItem.quantity * existingItem.price;
        } else {
            cart.push({ name, price, quantity: 1, subtotal: price });
        }
    }

    function updateCartUI() {
        const cartItems = document.querySelector("#cart-items tbody");
        cartItems.innerHTML = "";
        cart.forEach((item, index) => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${item.name}</td>
                <td>Ksh ${item.price}</td>
                <td>${item.quantity}</td>
                <td>Ksh ${item.subtotal}</td>
                <td><button class="remove-item" data-index="${index}">Remove</button></td>
            `;
            cartItems.appendChild(row);
        });

        const total = cart.reduce((sum, item) => sum + item.subtotal, 0);
        document.getElementById("cart-total").textContent = total.toFixed(2);

        document.querySelectorAll(".remove-item").forEach((button) => {
            button.addEventListener("click", function () {
                const index = parseInt(this.dataset.index);
                cart.splice(index, 1);
                updateCartUI();
            });
        });
    }

    document.getElementById("checkout-button").addEventListener("click", function () {
        if (cart.length === 0) {
            alert("Your cart is empty.");
            return;
        }

        let orderDetails = cart.map((item) => `${item.quantity}x ${item.name} - Ksh ${item.subtotal}`).join("\n");
        alert("Order Summary:\n" + orderDetails + "\nTotal: Ksh " + cart.reduce((sum, item) => sum + item.subtotal, 0).toFixed(2));
    });
</script>

</body>
</html>
